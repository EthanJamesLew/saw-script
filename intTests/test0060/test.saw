m <- llvm_load_module "./test.bc";

let id_spec = do {
    p <- crucible_fresh_pointer (llvm_int 32);
    crucible_execute_func [p];
    crucible_return p;
};

crucible_llvm_verify m "id_p" [] false id_spec z3;

// NOTE: Commented out due to bug #31 in crucible-verifier
// let incr_spec = do {
//     p <- crucible_fresh_pointer (llvm_array 10 (llvm_int 32));
//     crucible_execute_func [p];
//     crucible_return (crucible_elem p 1);
// };
// crucible_llvm_verify m "incr_p" [] false incr_spec z3;

let add_two_spec = do {
    x <- crucible_fresh_var "x" (llvm_int 32);
    xp <- crucible_alloc (llvm_int 64);
    crucible_points_to_untyped xp (crucible_term x);

    crucible_execute_func [xp];

    crucible_points_to_untyped xp (crucible_term {{ x + 2 }});
};

crucible_llvm_verify m "add_two" [] false add_two_spec z3;
